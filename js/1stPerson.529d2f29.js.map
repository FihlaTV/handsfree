{"version":3,"sources":["webpack:///./src/views/js/1stPersonSetup.js","webpack:///./src/views/1stPerson.vue?596c","webpack:///./src/views/1stPerson.vue?91c2","webpack:///src/views/1stPerson.vue","webpack:///./src/views/1stPerson.vue?664e","webpack:///./src/views/1stPerson.vue","webpack:///./src/assets/js/lib/PointerLockControls.js"],"names":["$world","camera","scene","renderer","controls","raycaster","objects","prevTime","velocity","direction","vertex","color","keepRunning","i","l","PointerLockControls","require","THREE","window","initWorld","instance","light","performance","now","Vector3","Color","document","querySelector","PerspectiveCamera","clientWidth","innerHeight","position","y","Scene","background","fog","Fog","HemisphereLight","set","add","body","getObject","Raycaster","floorGeometry","PlaneBufferGeometry","rotateX","Math","PI","attributes","count","fromBufferAttribute","x","random","z","setXYZ","toNonIndexed","colors","setHSL","push","r","g","b","setAttribute","Float32BufferAttribute","floorMaterial","MeshBasicMaterial","vertexColors","VertexColors","floor","Mesh","boxGeometry","BoxBufferGeometry","boxMaterial","MeshPhongMaterial","specular","flatShading","box","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","appendChild","domElement","addEventListener","onWindowResize","animate","aspect","updateProjectionMatrix","requestAnimationFrame","bind","ray","origin","copy","intersections","intersectObjects","onObject","length","time","delta","Number","move","forward","backward","right","left","normalize","max","jump","moveRight","moveForward","rotation","order","render","endWorld","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","staticRenderFns","data","mounted","$store","dispatch","initializeGame","setupHandsfree","Handsfree","disable","beforeDestroy","enable","endTheWorld","methods","use","out","in","head","translation","strafeBuffer","leanBuffer","state","browsUp","tweenPOV","ease","overwrite","immediate","setTimeout","component","VCard","VCardText","VCardTitle","VCol","VContainer","VRow","undefined","console","warn","isLocked","scope","changeEvent","type","lockEvent","unlockEvent","euler","Euler","PI_2","vec","onMouseMove","event","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","setFromQuaternion","quaternion","min","setFromEuler","dispatchEvent","onPointerlockChange","pointerLockElement","onPointerlockError","error","connect","disconnect","removeEventListener","dispose","getDirection","v","applyQuaternion","distance","setFromMatrixColumn","matrix","crossVectors","up","addScaledVector","lock","requestPointerLock","unlock","exitPointerLock","prototype","Object","create","EventDispatcher","constructor"],"mappings":"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","file":"js/1stPerson.529d2f29.js","sourcesContent":["const PointerLockControls = require('@/assets/js/lib/PointerLockControls')\r\n  .PointerLockControls\r\nconst THREE = window.THREE\r\n\r\nlet $world\r\nlet camera, scene, renderer, controls\r\nlet raycaster\r\nlet objects\r\nlet prevTime\r\nlet velocity\r\nlet direction\r\nlet vertex\r\nlet color\r\nlet keepRunning\r\nlet i\r\nlet l\r\n\r\n/**\r\n * Initialize the world\r\n * @param instance The Handsfree instance to work with\r\n */\r\nconst initWorld = function(instance) {\r\n  let light\r\n  objects = []\r\n  prevTime = performance.now()\r\n  velocity = new THREE.Vector3()\r\n  direction = new THREE.Vector3()\r\n  vertex = new THREE.Vector3()\r\n  color = new THREE.Color()\r\n  keepRunning = true\r\n  $world = document.querySelector('#world')\r\n\r\n  // Create and position the camera\r\n  camera = new THREE.PerspectiveCamera(\r\n    75,\r\n    $world.clientWidth / window.innerHeight,\r\n    1,\r\n    1000\r\n  )\r\n  camera.position.y = 30\r\n\r\n  // Setup the scene\r\n  scene = new THREE.Scene()\r\n  scene.background = new THREE.Color(0xffffff)\r\n  scene.fog = new THREE.Fog(0xffffff, 0, 750)\r\n  light = new THREE.HemisphereLight(0xeeeeff, 0x777788, 0.75)\r\n  light.position.set(0.5, 1, 0.75)\r\n\r\n  // Create the controls and add them to the scene\r\n  scene.add(light)\r\n  controls = new PointerLockControls(camera, document.body)\r\n  scene.add(controls.getObject())\r\n\r\n  // Create the raycaster\r\n  raycaster = new THREE.Raycaster(\r\n    new THREE.Vector3(),\r\n    new THREE.Vector3(0, -1, 0),\r\n    0,\r\n    10\r\n  )\r\n\r\n  // Create the floor\r\n  let floorGeometry = new THREE.PlaneBufferGeometry(2000, 2000, 100, 100)\r\n  floorGeometry.rotateX(-Math.PI / 2)\r\n\r\n  // vertex displacement\r\n  let position = floorGeometry.attributes.position\r\n  for (i = 0, l = position.count; i < l; i++) {\r\n    vertex.fromBufferAttribute(position, i)\r\n    vertex.x += Math.random() * 20 - 10\r\n    vertex.y += Math.random() * 2\r\n    vertex.z += Math.random() * 20 - 10\r\n    position.setXYZ(i, vertex.x, vertex.y, vertex.z)\r\n  }\r\n\r\n  // Tesselate the floor\r\n  floorGeometry = floorGeometry.toNonIndexed()\r\n  position = floorGeometry.attributes.position\r\n\r\n  // Create purpleish colors and add them to floor\r\n  let colors = []\r\n  for (i = 0, l = position.count; i < l; i++) {\r\n    color.setHSL(Math.random() * 0.3 + 0.5, 0.75, Math.random() * 0.25 + 0.75)\r\n    colors.push(color.r, color.g, color.b)\r\n  }\r\n  floorGeometry.setAttribute(\r\n    'color',\r\n    new THREE.Float32BufferAttribute(colors, 3)\r\n  )\r\n  let floorMaterial = new THREE.MeshBasicMaterial({\r\n    vertexColors: THREE.VertexColors\r\n  })\r\n  let floor = new THREE.Mesh(floorGeometry, floorMaterial)\r\n  scene.add(floor)\r\n\r\n  // Create cubes\r\n  let boxGeometry = new THREE.BoxBufferGeometry(20, 20, 20)\r\n  boxGeometry = boxGeometry.toNonIndexed() // ensure each face has unique vertices\r\n  position = boxGeometry.attributes.position\r\n  colors = []\r\n  for (i = 0, l = position.count; i < l; i++) {\r\n    color.setHSL(Math.random() * 0.3 + 0.5, 0.75, Math.random() * 0.25 + 0.75)\r\n    colors.push(color.r, color.g, color.b)\r\n  }\r\n  boxGeometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3))\r\n  for (i = 0; i < 500; i++) {\r\n    let boxMaterial = new THREE.MeshPhongMaterial({\r\n      specular: 0xffffff,\r\n      flatShading: true,\r\n      vertexColors: THREE.VertexColors\r\n    })\r\n    boxMaterial.color.setHSL(\r\n      Math.random() * 0.2 + 0.5,\r\n      0.75,\r\n      Math.random() * 0.25 + 0.75\r\n    )\r\n    let box = new THREE.Mesh(boxGeometry, boxMaterial)\r\n    box.position.x = Math.floor(Math.random() * 20 - 10) * 20\r\n    box.position.y = Math.floor(Math.random() * 20) * 20 + 10\r\n    box.position.z = Math.floor(Math.random() * 20 - 10) * 20\r\n    scene.add(box)\r\n    objects.push(box)\r\n  }\r\n\r\n  // Generate the renderer\r\n  renderer = new THREE.WebGLRenderer({ antialias: true })\r\n  renderer.setPixelRatio(window.devicePixelRatio)\r\n  renderer.setSize($world.clientWidth, window.innerHeight)\r\n  $world.appendChild(renderer.domElement)\r\n\r\n  // Make sure the world always fills the screen\r\n  window.addEventListener('resize', onWindowResize, false)\r\n\r\n  // Start the animation loop\r\n  animate(instance)\r\n}\r\n\r\n/**\r\n * Resize the world\r\n */\r\nconst onWindowResize = function() {\r\n  camera.aspect = $world.clientWidth / window.innerHeight\r\n  camera.updateProjectionMatrix()\r\n  renderer.setSize($world.clientWidth, window.innerHeight)\r\n}\r\n\r\n/**\r\n * The main animation loop\r\n * @param {*} instance The handsfree instance\r\n */\r\nconst animate = (instance) => {\r\n  keepRunning && requestAnimationFrame(animate.bind(instance, instance))\r\n\r\n  // Raycast and apply velocities\r\n  raycaster.ray.origin.copy(controls.getObject().position)\r\n  raycaster.ray.origin.y -= 10\r\n  let intersections = raycaster.intersectObjects(objects)\r\n  let onObject = intersections.length > 0\r\n  let time = performance.now()\r\n  let delta = (time - prevTime) / 1000\r\n  velocity.x -= velocity.x * 10.0 * delta\r\n  velocity.z -= velocity.z * 10.0 * delta\r\n  instance.velocity.y -= 9.8 * 100.0 * delta // 100.0 = mass\r\n\r\n  // Strafe\r\n  direction.z = Number(instance.move.forward) - Number(instance.move.backward)\r\n  direction.x = Number(instance.move.right) - Number(instance.move.left)\r\n  direction.normalize() // this ensures consistent movements in all directions\r\n\r\n  // Move\r\n  if (instance.move.forward || instance.move.backward)\r\n    velocity.z -= direction.z * 400.0 * delta\r\n  if (instance.move.left || instance.move.right)\r\n    velocity.x -= direction.x * 400.0 * delta\r\n  if (onObject === true) {\r\n    instance.velocity.y = Math.max(0, instance.velocity.y)\r\n    instance.move.jump = true\r\n  }\r\n\r\n  // Apply velocities\r\n  controls.moveRight(-velocity.x * delta)\r\n  controls.moveForward(-velocity.z * delta)\r\n  controls.getObject().position.y += instance.velocity.y * delta // new behavior\r\n  if (controls.getObject().position.y < 10) {\r\n    instance.velocity.y = 0\r\n    controls.getObject().position.y = 10\r\n    instance.move.jump = true\r\n  }\r\n\r\n  // Rotate\r\n  camera.rotation.order = 'YXZ'\r\n  controls.getObject().rotation.y = instance.rotation.y\r\n  controls.getObject().rotation.x = instance.rotation.x\r\n\r\n  prevTime = time\r\n  renderer.render(scene, camera)\r\n}\r\n\r\n/**\r\n * End the loop\r\n */\r\nconst endWorld = function() {\r\n  keepRunning = false\r\n}\r\n\r\nexport { initWorld, endWorld }\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./1stPerson.vue?vue&type=style&index=0&id=183b7d30&lang=sass&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./1stPerson.vue?vue&type=style&index=0&id=183b7d30&lang=sass&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"world\"}}),_c('v-container',[_c('v-row',[_c('v-col',{staticClass:\"col-12 col-lg-4\"},[_c('v-card',[_c('v-card-title',[_vm._v(\"1st Person View\")]),_c('v-card-text',[_c('p',[_vm._v(\"This experiment explores the \"),_c('code',[_vm._v(\"handsfree.head.translation\")]),_vm._v(\" properties to move the camera based on the direction you lean in.\")]),_c('ul',[_c('li',[_vm._v(\"Lean in/back/left/right to move in that direction\")]),_c('li',[_vm._v(\"Turn head around to look around\")]),_c('li',[_vm._v(\"Raise both eyebrows to jump.\")])])])],1),_c('v-card',{staticClass:\"mt-5\"},[_c('v-card-text',[_c('blockquote',{staticClass:\"twitter-tweet\"},[_c('p',{attrs:{\"lang\":\"en\",\"dir\":\"ltr\"}},[_vm._v(\"Started on last tutorial, which shows how to use head position to move around in 3D by leaning (and using eyebrows to jump)!\"),_c('br'),_c('br'),_vm._v(\"Day 9 of \"),_c('a',{attrs:{\"href\":\"https://twitter.com/hashtag/100DaysofCode?src=hash&ref_src=twsrc%5Etfw\"}},[_vm._v(\"#100DaysofCode\")]),_vm._v(\" and \"),_c('a',{attrs:{\"href\":\"https://twitter.com/hashtag/100DaysofMLCode?src=hash&ref_src=twsrc%5Etfw\"}},[_vm._v(\"#100DaysofMLCode\")]),_vm._v(\" \"),_c('a',{attrs:{\"href\":\"https://t.co/4QRABhzFUn\"}},[_vm._v(\"pic.twitter.com/4QRABhzFUn\")])]),_vm._v(\"— Oz Ramos (@HeyOzRamos) \"),_c('a',{attrs:{\"href\":\"https://twitter.com/HeyOzRamos/status/1194866956991524864?ref_src=twsrc%5Etfw\"}},[_vm._v(\"November 14, 2019\")])])])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n  div\r\n    #world\r\n    v-container\r\n      v-row\r\n        v-col.col-12.col-lg-4\r\n          v-card\r\n            v-card-title 1st Person View\r\n            v-card-text\r\n              p This experiment explores the <code>handsfree.head.translation</code> properties to move the camera based on the direction you lean in.\r\n              ul\r\n                li Lean in/back/left/right to move in that direction\r\n                li Turn head around to look around\r\n                li Raise both eyebrows to jump.\r\n\r\n          v-card.mt-5\r\n            v-card-text\r\n              <blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">Started on last tutorial, which shows how to use head position to move around in 3D by leaning (and using eyebrows to jump)!<br><br>Day 9 of <a href=\"https://twitter.com/hashtag/100DaysofCode?src=hash&amp;ref_src=twsrc%5Etfw\">#100DaysofCode</a> and <a href=\"https://twitter.com/hashtag/100DaysofMLCode?src=hash&amp;ref_src=twsrc%5Etfw\">#100DaysofMLCode</a> <a href=\"https://t.co/4QRABhzFUn\">pic.twitter.com/4QRABhzFUn</a></p>&mdash; Oz Ramos (@HeyOzRamos) <a href=\"https://twitter.com/HeyOzRamos/status/1194866956991524864?ref_src=twsrc%5Etfw\">November 14, 2019</a></blockquote>\r\n</template>\r\n\r\n<script>\r\nimport { TweenMax } from 'gsap/all'\r\nlet endTheWorld\r\n\r\nexport default {\r\n  data: () => ({\r\n    move: {\r\n      forward: false,\r\n      backward: false,\r\n      left: false,\r\n      right: false,\r\n      jump: true\r\n    },\r\n\r\n    velocity: {\r\n      y: 0\r\n    },\r\n\r\n    rotation: {\r\n      x: 0,\r\n      y: 0\r\n    }\r\n  }),\r\n\r\n  mounted() {\r\n    this.$store.dispatch('loadScripts', [\r\n      'https://platform.twitter.com/widgets.js'\r\n    ])\r\n\r\n    if (!window.THREE) {\r\n      this.$store.dispatch('loadScripts', [\r\n        'https://cdnjs.cloudflare.com/ajax/libs/three.js/109/three.min.js'\r\n      ])\r\n    }\r\n    this.initializeGame()\r\n    this.setupHandsfree()\r\n    window.Handsfree.disable('head.vertScroll')\r\n  },\r\n\r\n  beforeDestroy() {\r\n    window.Handsfree.enable('head.vertScroll')\r\n    window.Handsfree.disable('head.threeCamera')\r\n    endTheWorld()\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Sets up handsfree\r\n     */\r\n    setupHandsfree() {\r\n      window.Handsfree.use('head.threeCamera', ({ head }) => {\r\n        // The normalized amount from center to lean before moving in that directon\r\n        let strafeBuffer = 0.15\r\n        let leanBuffer = {\r\n          out: 0.1,\r\n          in: 0.01\r\n        }\r\n\r\n        // Strafe\r\n        if (head.translation[0] > 0.5 + strafeBuffer) this.move.right = true\r\n        else this.move.right = false\r\n\r\n        if (head.translation[0] < 0.5 - strafeBuffer) this.move.left = true\r\n        else this.move.left = false\r\n\r\n        // Lean\r\n        if (head.translation[2] > 0.25 + leanBuffer.out)\r\n          this.move.forward = true\r\n        else this.move.forward = false\r\n\r\n        if (head.translation[2] < 0.25 - leanBuffer.in)\r\n          this.move.backward = true\r\n        else this.move.backward = false\r\n\r\n        // Jump\r\n        if (head.state.browsUp) {\r\n          if (this.move.jump) this.velocity.y += 350\r\n          this.move.jump = false\r\n        }\r\n\r\n        this.tweenPOV(head)\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Tweetn values\r\n     */\r\n    tweenPOV(head) {\r\n      TweenMax.to(this.rotation, 500 / 1000, {\r\n        x: -head.rotation[0] * 8 + Math.PI / 2,\r\n        y: -head.rotation[1] * 10,\r\n        z: head.rotation[2] * 2,\r\n        ease: 'Linear.easeNone',\r\n        overwrite: true,\r\n        immediate: true\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Load pointer lock controls\r\n     */\r\n    initializeGame() {\r\n      setTimeout(() => {\r\n        if (!window.THREE) {\r\n          this.initializeGame()\r\n        } else {\r\n          const { initWorld, endWorld } = require('./js/1stPersonSetup')\r\n          initWorld(this)\r\n          endTheWorld = endWorld\r\n        }\r\n      }, 100)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"sass\" scoped>\r\n#world\r\n  width: 100%\r\n  position: absolute\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./1stPerson.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./1stPerson.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./1stPerson.vue?vue&type=template&id=183b7d30&scoped=true&lang=pug&\"\nimport script from \"./1stPerson.vue?vue&type=script&lang=js&\"\nexport * from \"./1stPerson.vue?vue&type=script&lang=js&\"\nimport style0 from \"./1stPerson.vue?vue&type=style&index=0&id=183b7d30&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"183b7d30\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCard,VCardText,VCardTitle,VCol,VContainer,VRow})\n","/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nvar PointerLockControls = function(camera, domElement) {\r\n  if (domElement === undefined) {\r\n    console.warn(\r\n      'THREE.PointerLockControls: The second parameter \"domElement\" is now mandatory.'\r\n    )\r\n    domElement = document.body\r\n  }\r\n\r\n  this.domElement = domElement\r\n  this.isLocked = false\r\n\r\n  //\r\n  // internals\r\n  //\r\n\r\n  var scope = this\r\n\r\n  var changeEvent = { type: 'change' }\r\n  var lockEvent = { type: 'lock' }\r\n  var unlockEvent = { type: 'unlock' }\r\n\r\n  var euler = new window.THREE.Euler(0, 0, 0, 'YXZ')\r\n\r\n  var PI_2 = Math.PI / 2\r\n\r\n  var vec = new window.THREE.Vector3()\r\n\r\n  function onMouseMove(event) {\r\n    if (scope.isLocked === false) return\r\n\r\n    var movementX =\r\n      event.movementX || event.mozMovementX || event.webkitMovementX || 0\r\n    var movementY =\r\n      event.movementY || event.mozMovementY || event.webkitMovementY || 0\r\n\r\n    euler.setFromQuaternion(camera.quaternion)\r\n\r\n    euler.y -= movementX * 0.002\r\n    euler.x -= movementY * 0.002\r\n\r\n    euler.x = Math.max(-PI_2, Math.min(PI_2, euler.x))\r\n\r\n    camera.quaternion.setFromEuler(euler)\r\n\r\n    scope.dispatchEvent(changeEvent)\r\n  }\r\n\r\n  function onPointerlockChange() {\r\n    if (document.pointerLockElement === scope.domElement) {\r\n      scope.dispatchEvent(lockEvent)\r\n\r\n      scope.isLocked = true\r\n    } else {\r\n      scope.dispatchEvent(unlockEvent)\r\n\r\n      scope.isLocked = false\r\n    }\r\n  }\r\n\r\n  function onPointerlockError() {\r\n    console.error('THREE.PointerLockControls: Unable to use Pointer Lock API')\r\n  }\r\n\r\n  this.connect = function() {\r\n    document.addEventListener('mousemove', onMouseMove, false)\r\n    document.addEventListener('pointerlockchange', onPointerlockChange, false)\r\n    document.addEventListener('pointerlockerror', onPointerlockError, false)\r\n  }\r\n\r\n  this.disconnect = function() {\r\n    document.removeEventListener('mousemove', onMouseMove, false)\r\n    document.removeEventListener(\r\n      'pointerlockchange',\r\n      onPointerlockChange,\r\n      false\r\n    )\r\n    document.removeEventListener('pointerlockerror', onPointerlockError, false)\r\n  }\r\n\r\n  this.dispose = function() {\r\n    this.disconnect()\r\n  }\r\n\r\n  this.getObject = function() {\r\n    // retaining this method for backward compatibility\r\n\r\n    return camera\r\n  }\r\n\r\n  this.getDirection = (function() {\r\n    var direction = new window.THREE.Vector3(0, 0, -1)\r\n\r\n    return function(v) {\r\n      return v.copy(direction).applyQuaternion(camera.quaternion)\r\n    }\r\n  })()\r\n\r\n  this.moveForward = function(distance) {\r\n    // move forward parallel to the xz-plane\r\n    // assumes camera.up is y-up\r\n\r\n    vec.setFromMatrixColumn(camera.matrix, 0)\r\n\r\n    vec.crossVectors(camera.up, vec)\r\n\r\n    camera.position.addScaledVector(vec, distance)\r\n  }\r\n\r\n  this.moveRight = function(distance) {\r\n    vec.setFromMatrixColumn(camera.matrix, 0)\r\n\r\n    camera.position.addScaledVector(vec, distance)\r\n  }\r\n\r\n  this.lock = function() {\r\n    this.domElement.requestPointerLock()\r\n  }\r\n\r\n  this.unlock = function() {\r\n    document.exitPointerLock()\r\n  }\r\n\r\n  this.connect()\r\n}\r\n\r\nPointerLockControls.prototype = Object.create(\r\n  window.THREE.EventDispatcher.prototype\r\n)\r\nPointerLockControls.prototype.constructor = PointerLockControls\r\n\r\nexport { PointerLockControls }\r\n"],"sourceRoot":""}